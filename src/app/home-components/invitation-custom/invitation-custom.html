<main
  class="flex-1 w-full max-w-[1440px] mx-auto grid grid-cols-1 lg:grid-cols-12 gap-0 relative bg-surface-light dark:bg-background-dark"
>
  <div
    class="lg:col-span-7 xl:col-span-7 flex flex-col pt-8 pb-24 px-4 sm:px-8 lg:px-12 xl:px-16 overflow-y-auto"
  >
    <div class="mb-8">
      <div class="flex items-center gap-2 text-text-sub text-sm mb-4">
        <a class="hover:text-primary transition-colors" routerLink="/invitations">Davetiyeler</a>
        <span class="material-symbols-outlined text-xs text-ochre">chevron_right</span>
        <span class="text-primary font-bold">Kişiselleştirme</span>
      </div>
      <h1
        class="text-3xl md:text-4xl font-serif font-bold text-text-main dark:text-white tracking-tight mb-2"
      >
        Davetiyenizi Tasarlayın
      </h1>
      <p class="text-text-sub dark:text-cream/70 italic">
        En özel gününüz için her detayı kendinize göre özelleştirin.
      </p>
    </div>

    <div class="mb-10">
      <div class="flex items-center justify-between mb-2">
        <span class="text-sm font-bold text-primary">01. Çift & Aile</span>
        <span class="text-sm font-medium text-text-sub">02. Tören</span>
        <span class="text-sm font-medium text-text-sub">03. Mesaj</span>
      </div>
      <div class="h-1 w-full bg-ochre/20 rounded-full overflow-hidden">
        <div class="h-full bg-primary w-1/3 rounded-full transition-all duration-500"></div>
      </div>
    </div>

    <form (ngSubmit)="create()" class="flex flex-col gap-8">
      <div
        class="bg-cream dark:bg-surface-dark p-6 sm:p-8 rounded-sm border border-ochre/30 shadow-sm"
      >
        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-ochre/20">
          <div
            class="size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"
          >
            <span class="material-symbols-outlined text-xl">favorite</span>
          </div>
          <h3 class="text-xl font-serif font-bold text-text-main dark:text-white">
            Çift Bilgileri
          </h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <div class="flex flex-col gap-1.5">
            <label
              class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
              for="brideName"
              >Gelin Adı</label
            >
            <input
              class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 px-4 py-3 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
              id="brideName"
              name="brideName"
              [(ngModel)]="invitationCard.brideName"
              placeholder="Örn: Ayşe"
              type="text"
            />
          </div>

          <div class="flex flex-col gap-1.5">
            <label
              class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
              for="groomName"
              >Damat Adı</label
            >
            <input
              class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 px-4 py-3 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
              id="groomName"
              name="groomName"
              [(ngModel)]="invitationCard.groomName"
              placeholder="Örn: Kerem"
              type="text"
            />
          </div>
        </div>

        <div class="flex flex-col gap-1.5 mb-6">
          <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
            >Kız Tarafı Aile</label
          >
          <input
            class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 px-4 py-3 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
            name="brideParents"
            [(ngModel)]="invitationCard.brideParents"
            placeholder="Örn: Yılmaz Ailesi"
            type="text"
          />
        </div>

        <div class="flex flex-col gap-1.5">
          <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
            >Erkek Tarafı Aile</label
          >
          <input
            class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 px-4 py-3 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
            name="groomParents"
            [(ngModel)]="invitationCard.groomParents"
            placeholder="Örn: Demir Ailesi"
            type="text"
          />
        </div>
      </div>

      <div
        class="bg-cream dark:bg-surface-dark p-6 sm:p-8 rounded-sm border border-ochre/30 shadow-sm"
      >
        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-ochre/20">
          <div
            class="size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"
          >
            <span class="material-symbols-outlined text-xl">church</span>
          </div>
          <h3 class="text-xl font-serif font-bold text-text-main dark:text-white">Düğün Töreni</h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div class="flex flex-col gap-1.5">
            <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
              >Düğün Tarihi</label
            >
            <input
              class="w-full rounded-sm border border-ochre/40 bg-white/80 px-4 py-3 text-text-main focus:border-primary focus:ring-1 focus:ring-primary/20 outline-none"
              name="tempWeddingDate"
              [(ngModel)]="formWeddingDate"
              (ngModelChange)="updateWeddingDateTime()"
              type="date"
            />
          </div>

          <div class="flex flex-col gap-1.5">
            <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
              >Başlama Saati</label
            >
            <input
              class="w-full rounded-sm border border-ochre/40 bg-white/80 px-4 py-3 text-text-main focus:border-primary focus:ring-1 focus:ring-primary/20 outline-none"
              name="tempWeddingTime"
              [(ngModel)]="formWeddingTime"
              (ngModelChange)="updateWeddingDateTime()"
              type="time"
            />
          </div>
        </div>

        <div class="flex flex-col gap-1.5">
          <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
            >Düğün Mekanı ve Adresi</label
          >
          <input
            class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 px-4 py-3 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
            name="weddingAddress"
            [(ngModel)]="invitationCard.weddingAddress"
            placeholder="Örn: Botanik Kır Bahçesi, Çankaya/Ankara"
            type="text"
          />
        </div>
      </div>

      <div
        class="bg-cream dark:bg-surface-dark p-6 sm:p-8 rounded-sm border border-ochre/30 shadow-sm"
      >
        <div class="flex items-center justify-between mb-2">
          <div class="flex items-center gap-3">
            <div
              class="size-10 rounded-full bg-ochre/20 flex items-center justify-center text-primary"
            >
              <span class="material-symbols-outlined text-xl">nightlight</span>
            </div>
            <h3 class="text-xl font-serif font-bold text-text-main dark:text-white">Kına Gecesi</h3>
          </div>

          <label class="relative inline-flex items-center cursor-pointer">
            <input name="showHenna" [(ngModel)]="showHenna" type="checkbox" class="sr-only peer" />
            <div
              class="w-11 h-6 bg-ochre/30 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"
            ></div>
            <span class="ml-3 text-sm font-bold text-text-main">Kına Ekle</span>
          </label>
        </div>

        <div
          *ngIf="showHenna"
          class="mt-6 pt-6 border-t border-ochre/20 transition-all duration-300"
        >
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="flex flex-col gap-1.5">
              <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
                >Kına Tarihi</label
              >
              <input
                class="w-full rounded-sm border border-ochre/40 bg-white/80 px-4 py-3 text-text-main focus:border-primary focus:ring-1 focus:ring-primary/20 outline-none"
                name="tempHennaDate"
                [(ngModel)]="formHennaDate"
                (ngModelChange)="updateHennaDateTime()"
                type="date"
              />
            </div>
            <div class="flex flex-col gap-1.5">
              <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
                >Başlama Saati</label
              >
              <input
                class="w-full rounded-sm border border-ochre/40 bg-white/80 px-4 py-3 text-text-main focus:border-primary focus:ring-1 focus:ring-primary/20 outline-none"
                name="tempHennaTime"
                [(ngModel)]="formHennaTime"
                (ngModelChange)="updateHennaDateTime()"
                type="time"
              />
            </div>
          </div>
          <div class="flex flex-col gap-1.5">
            <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
              >Kına Mekanı & Adresi</label
            >
            <input
              class="w-full rounded-sm border border-ochre/40 bg-white/80 px-4 py-3 text-text-main focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none placeholder:text-text-sub/40"
              name="hennaNightAddress"
              [(ngModel)]="invitationCard.hennaNightAddress"
              placeholder="Kına mekanını buraya yazabilirsiniz..."
              type="text"
            />
          </div>
        </div>
      </div>

      <div
        class="bg-cream dark:bg-surface-dark p-6 sm:p-8 rounded-sm border border-ochre/30 shadow-sm"
      >
        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-ochre/20">
          <div
            class="size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"
          >
            <span class="material-symbols-outlined text-xl">edit_note</span>
          </div>
          <h3 class="text-xl font-serif font-bold text-text-main dark:text-white">
            Davetiye Mesajı
          </h3>
        </div>
        <div class="flex flex-col gap-1.5">
          <label class="text-[11px] font-bold text-text-sub uppercase tracking-widest pl-1"
            >Özel Mesajınız</label
          >
          <textarea
            class="w-full rounded-sm border border-ochre/40 bg-white/80 dark:bg-background-dark/50 p-4 text-text-main dark:text-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all outline-none resize-none text-base leading-relaxed placeholder:text-text-sub/40"
            name="invitationMessage"
            [(ngModel)]="invitationCard.invitationMessage"
            placeholder="Misafirlerinize iletmek istediğiniz notu buraya yazın..."
            rows="5"
          ></textarea>
        </div>
      </div>

      <div
        class="hidden lg:block bg-cream dark:bg-surface-dark p-6 sm:p-8 rounded-sm border border-ochre/30 shadow-sm mt-4"
      >
        <button
          type="submit"
          class="w-full h-14 flex items-center justify-center gap-2 rounded-sm bg-primary text-cream font-bold tracking-widest uppercase text-sm hover:bg-text-main transition-colors duration-300"
        >
          <span class="material-symbols-outlined">check_circle</span>
          Kaydet ve Onayla
        </button>
      </div>

      <div class="h-20 lg:hidden"></div>
    </form>
  </div>

  <div
    class="lg:col-span-5 xl:col-span-5 hidden lg:block relative bg-white border-l border-ochre/20"
  >
    <div class="sticky top-[73px] h-[calc(100vh-73px)] flex flex-col">
      <div
        class="flex-1 flex items-center justify-center p-8 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-cream via-surface-light to-white"
      >
        <div
          class="relative w-full max-w-[420px] aspect-[1/1.4] bg-white shadow-2xl rounded-sm overflow-hidden transform transition-all duration-500 hover:scale-[1.01] border border-ochre/10"
        >
          <div
            class="absolute inset-0 opacity-100 z-0 bg-cover bg-center"
            [style.background-image]="
              'url(' +
              (imageUrl ||
                'https://images.unsplash.com/photo-1544027419-45f8f8705ce6?q=80&w=400&auto=format&fit=crop') +
              ')'
            "
          >
            <div class="absolute inset-0"></div>
          </div>

          <div
            class="relative z-10 flex flex-col items-center justify-center h-full text-center p-10 space-y-6"
          >
            <div class="space-y-1">
              <p class="uppercase tracking-[0.2em] text-[9px] font-bold text-text-sub">
                {{ invitationCard.brideParents || 'Kız Ailesi' }} &
                {{ invitationCard.groomParents || 'Erkek Ailesi' }}
              </p>
            </div>

            <div class="space-y-0 w-full">
              <h2
                class="font-serif text-[3.2rem] font-bold text-text-main truncate w-full leading-none"
              >
                {{ invitationCard.brideName || 'Gelin' }}
              </h2>
              <p class="text-2xl font-light text-primary italic font-serif my-1">&</p>
              <h2
                class="font-serif text-[3.2rem] font-bold text-text-main truncate w-full leading-none"
              >
                {{ invitationCard.groomName || 'Damat' }}
              </h2>
            </div>

            <p
              class="text-sm text-text-sub italic max-w-[250px] leading-relaxed break-words font-serif mt-4"
            >
              {{
                invitationCard.invitationMessage ||
                  'Yeni hayatlarının başlangıcındaki bu mutlu günlerini sizinle paylaşmaktan onur duyarlar.'
              }}
            </p>

            <div class="w-16 h-[1px] bg-primary/40 my-4"></div>

            <div class="space-y-1 font-medium text-text-main">
              <p class="text-lg font-serif font-bold text-primary tracking-widest">
                {{
                  (invitationCard.weddingDate | date: 'dd.MM.yyyy | HH:mm') ||
                    'Tarih ve Saat Seçiniz'
                }}
              </p>
            </div>
            <div class="space-y-1 text-sm text-text-sub mt-2">
              <p
                class="text-[11px] uppercase tracking-widest font-bold border-t border-ochre/20 pt-4 mt-2"
              >
                {{ invitationCard.weddingAddress || 'Mekan ve Adres Bilgisi' }}
              </p>
            </div>
            
            <div *ngIf="showHenna" class="w-full border-t border-ochre/20 pt-3 mt-2">
              <p class="text-[9px] uppercase tracking-[0.2em] font-bold text-primary mb-1">
                <span class="material-symbols-outlined text-[10px] align-middle mr-1"
                  >nightlight</span
                >
                Kına Gecesi
              </p>

              <p class="text-sm font-serif font-bold text-text-main tracking-widest">
                {{
                  (invitationCard.hennaNightDate | date: 'dd.MM.yyyy | HH:mm') ||
                    'Tarih ve Saat Seçiniz'
                }}
              </p>

              <p class="text-[9px] uppercase tracking-widest font-bold text-text-sub mt-1 px-4">
                {{ invitationCard.hennaNightAddress || 'Kına Mekanı ve Adresi' }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="fixed bottom-0 left-0 right-0 p-4 bg-cream border-t border-ochre/20 lg:hidden z-40 shadow-[0_-4px_20px_rgba(0,0,0,0.05)]"
  >
    <button
      (click)="create()"
      class="w-full h-14 flex items-center justify-center gap-2 rounded-sm bg-primary text-cream font-bold tracking-widest uppercase text-sm shadow-lg shadow-primary/20"
    >
      Kaydet ve Onayla
    </button>
  </div>
</main>
