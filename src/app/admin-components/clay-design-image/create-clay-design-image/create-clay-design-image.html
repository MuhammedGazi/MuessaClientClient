<div class="container mt-4">
  <div class="card shadow-sm border-0 p-4">
    <h3 class="mb-4 text-success"><i class="bi bi-plus-circle me-2"></i>Yeni Görsel Ekle</h3>

    <form #form="ngForm" (ngSubmit)="create()">

      @if (previewUrl) {
        <div class="mb-4 text-center bg-light p-3 rounded border-dashed">
          <label class="form-label text-muted small d-block mb-2">Görsel Önizlemesi</label>
          <img [src]="previewUrl" alt="Önizleme" class="img-thumbnail shadow-sm" style="max-height: 250px; object-fit: contain;">
        </div>
      }

      <div class="mb-4">
        <label for="imageInput" class="form-label fw-bold">Görsel Seç <span class="text-danger">*</span></label>
        <input type="file" id="imageInput" class="form-control" (change)="onFileSelected($event)" accept="image/*" required>
        @if (!selectedFile && form.submitted) {
          <div class="text-danger small mt-1">Lütfen bir görsel seçin.</div>
        }
      </div>

      <div class="mb-4">
        <label for="clayDesignId" class="form-label fw-bold">Bağlı Olduğu Tasarım <span class="text-danger">*</span></label>
        <select id="clayDesignId" name="clayDesignId" [(ngModel)]="clayDesignId" class="form-select" required>
          <option [ngValue]="null" disabled selected>Lütfen bir tasarım seçin...</option>

          @for (item of clayDesigns; track item.id) {
            <option [value]="item.id">{{ item.name }}</option>
          }
        </select>
      </div>

      <div class="mb-4 form-check form-switch mt-3">
        <input type="checkbox" id="isMainCheck" name="isMain" [(ngModel)]="isMain" class="form-check-input" style="transform: scale(1.2); margin-top: 0.2rem;">
        <label class="form-check-label ms-2 fw-bold" for="isMainCheck">Bu tasarımın ana görseli olsun</label>
      </div>

      <div class="d-flex justify-content-end gap-2 border-top pt-3 mt-4">
        <button type="button" class="btn btn-outline-secondary" routerLink="/admin/claydesignimage">İptal</button>

        <button type="submit" class="btn btn-success" [disabled]="form.invalid || !selectedFile">
          <i class="bi bi-cloud-arrow-up me-1"></i> Kaydet ve Yükle
        </button>
      </div>

    </form>
  </div>
</div>
