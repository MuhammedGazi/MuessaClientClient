<div class="container mt-4">
  <div class="card shadow-sm border-0 p-4">
    <h3 class="mb-4 text-primary"><i class="bi bi-pencil-square me-2"></i>Görseli Güncelle</h3>

    <form #form="ngForm" (ngSubmit)="update()">

      <input type="hidden" name="id" [(ngModel)]="clayImage.id">
      <input type="hidden" name="imageId" [(ngModel)]="clayImage.imageId">

      @if (clayImage.imageUrl) {
        <div class="mb-4 text-center bg-light p-3 rounded">
          <label class="form-label text-muted small d-block mb-2">Mevcut Görsel</label>
          <img [src]="clayImage.thumbnailUrl || clayImage.imageUrl" alt="Tasarım Görseli" class="img-thumbnail shadow-sm" style="max-height: 200px; object-fit: contain;">
        </div>
      }

      <div class="mb-3">
        <label for="imageInput" class="form-label fw-bold">Yeni Görsel Seç (Değiştirmek istersen)</label>
        <input type="file" id="imageInput" class="form-control" (change)="onFileSelected($event)" accept="image/*">
        <div class="form-text text-muted small">Mevcut görseli değiştirmek istemiyorsanız burayı boş bırakın.</div>
      </div>

      <div class="mb-3">
        <label for="clayDesignId" class="form-label fw-bold">Bağlı Olduğu Tasarım</label>
        <select id="clayDesignId" name="clayDesignId" [(ngModel)]="clayImage.clayDesignId" class="form-select" required>
          <option [ngValue]="null" disabled>Lütfen bir tasarım seçin...</option>

          @for (item of clayDesigns; track item.id) {
            <option [value]="item.id">{{ item.name }}</option>
          }
        </select>
      </div>

      <div class="mb-4 form-check form-switch mt-3">
        <input type="checkbox" id="isMainCheck" name="isMain" [(ngModel)]="clayImage.isMain" class="form-check-input" style="transform: scale(1.2); margin-top: 0.2rem;">
        <label class="form-check-label ms-2 fw-bold" for="isMainCheck">Bu tasarımın ana görseli olsun</label>
      </div>

      <div class="d-flex justify-content-end gap-2 border-top pt-3 mt-4">
        <button type="button" class="btn btn-outline-secondary" routerLink="/admin/claydesignimage">İptal</button>

        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
          <i class="bi bi-save me-1"></i> Değişiklikleri Kaydet
        </button>
      </div>

    </form>
  </div>
</div>
